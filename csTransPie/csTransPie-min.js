(function(a){var b=function(b){var c=a(b.get(0).form),d=b.next();if(!d.is("label")){d=b.prev();if(d.is("label")){var e=b.attr("id");e&&(d=c.find('label[for="'+e+'"]'))}}return d.attr("for")?d.css("cursor","pointer"):!1},c=function(b){var c=a(".cTPSelectWrapper ul:visible");c.each(function(){var c=a(this).parents(".cTPSelectWrapper:first").find("select").get(0);(!b||!c.oLabel||c.oLabel.get(0)!=b.get(0))&&a(this).hide()})},d=function(b){a(b.target).parents(".cTPSelectWrapper").length===0&&c(a(b.target))},e=function(){a(document).mousedown(d)},f=function(b){var c;a(".cTPSelectWrapper select",b).each(function(){c=this.selectedIndex<0?0:this.selectedIndex,a("ul",a(this).parent()).each(function(){a("a:eq("+c+")",this).click()})}),a("a.cTPCheckbox, a.cTPRadio",b).removeClass("cTPChecked"),a("input:checkbox",b).each(function(){this.checked&&a("a",a(this).parent()).addClass("cTPChecked")}),a("input:radio",b).each(function(){this.checked&&a("a",a(this).parent()).addClass("cTPCheckedR")})};a.fn.jqTransCheckBox=function(){return this.each(function(){if(a(this).hasClass("cTPHidden"))return;var c=a(this),d=this;oLabel=b(c);var e=a('<a href="#" class="cTPCheckbox"></a>');c.addClass("cTPHidden").wrap('<span class="cTPCheckboxWrapper"></span>').parent().prepend(e),c.change(function(){return d.checked&&e.addClass("cTPChecked")||e.removeClass("cTPChecked"),!0}),e.click(function(){return c.attr("disabled")?!1:(c.trigger("click").trigger("change"),!1)}),d.checked&&e.addClass("cTPChecked")})},a.fn.jqTransRadio=function(){return this.each(function(){if(a(this).hasClass("cTPHidden"))return;var c=a(this),d=this;oLabel=b(c),oLabel&&oLabel.click(function(){e.trigger("click")});var e=a('<a href="#" class="cTPRadio" rel="'+this.name+'"></a>');c.addClass("cTPHidden").wrap('<span class="cTPRadioWrapper"></span>').parent().prepend(e),c.change(function(){return d.checked&&e.addClass("cTPCheckedR")||e.removeClass("cTPCheckedR"),!0}),e.click(function(){return c.attr("disabled")?!1:(c.trigger("click").trigger("change"),a('input[name="'+c.attr("name")+'"]',d.form).not(c).each(function(){a(this).attr("type")=="radio"&&a(this).trigger("change")}),!1)}),d.checked&&e.addClass("cTPCheckedR")})},a.fn.jqTransSelect=function(){return this.each(function(d){var e=a(this);if(e.hasClass("cTPHidden"))return;if(e.attr("multiple"))return;var f=b(e),g=e.addClass("cTPHidden").wrap('<div class="cTPSelectWrapper"></div>').parent().css({zIndex:100-d});g.prepend('<div><span></span><a href="#" class="cTPSelectOpen">&#9660;</a></div><ul></ul>');var h=a("ul",g).css("width",e.width()).hide();a("option",this).each(function(b){var c=a('<li><a href="#" index="'+b+'">'+a(this).html()+"</a></li>");h.append(c)}),h.find("a").click(function(){return a("a.selected",g).removeClass("selected"),a(this).addClass("selected"),e[0].selectedIndex!=a(this).attr("index")&&(e[0].selectedIndex=a(this).attr("index"),a(e[0]).trigger("change")),e[0].selectedIndex=a(this).attr("index"),a("span:eq(0)",g).html(a(this).html()),h.hide(),!1}),a("a:eq("+this.selectedIndex+")",h).click(),a("span:first",g).click(function(){a("a.cTPSelectOpen",g).trigger("click")}),f&&f.click(function(){a("a.cTPSelectOpen",g).trigger("click")}),this.oLabel=f;var i=a("a.cTPSelectOpen",g).click(function(){return h.css("display")=="none"&&c(),e.attr("disabled")?!1:(h.slideToggle("fast",function(){var b=a("a.selected",h).offset().top-h.offset().top;h.animate({scrollTop:b})}),!1)}),j=e.outerWidth()+20,k=a("span:first",g),l=j>k.innerWidth()?j+i.outerWidth():g.width();g.css("width",l),h.css("width",l-2),k.css({width:j}),h.css({display:"block",visibility:"hidden"});var m=a("li",h).length*a("li:first",h).height();m<h.height()&&h.css({height:m,overflow:"hidden"}),h.css({display:"none",visibility:"visible"})})},a.fn.cTP=function(){return this.each(function(){a("input:checkbox",this).jqTransCheckBox(),a("input:radio",this).jqTransRadio(),a("select",this).jqTransSelect().length>0&&e(),a(this).bind("reset",function(){var a=function(){f(this)};window.setTimeout(a,10)})})}})(jQuery),$(function(){$(".transpie").cTP()})