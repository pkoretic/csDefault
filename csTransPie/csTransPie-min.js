(function(a){var b=function(b){var c=a(b.get(0).form),d=b.next();if(!d.is("label")){d=b.prev();if(d.is("label")){var e=b.attr("id");e&&(d=c.find('label[for="'+e+'"]'))}}return!1},c=function(b){var c=a(".cTPSelectWrapper ul:visible");c.each(function(){var c=a(this).parents(".cTPSelectWrapper:first").find("select").get(0);(!b||!c.oLabel||c.oLabel.get(0)!=b.get(0))&&a(this).hide()})},d=function(b){a(b.target).parents(".cTPSelectWrapper").length===0&&c(a(b.target))},e=function(){a(document).mousedown(d)},f=function(b){var c=0;a("select",b).each(function(){a("a:eq("+a(this).data("index")+")",a(".select"+c++ +" ul",b)).click()}),a("input:checkbox",b).each(function(){a(this).data("val")&&a("a",a(this).parent()).addClass("cTPChecked")||a("a",a(this).parent()).removeClass("cTPChecked")}),a("input:radio",b).each(function(){a(this).data("val")&&a("a",a(this).parent()).addClass("cTPCheckedR")||a("a",a(this).parent()).removeClass("cTPCheckedR")})};a.fn.cTPCheckBox=function(){return this.each(function(){if(a(this).hasClass("cTPHidden"))return;var c=a(this);c.data("val",this.checked);var d=a('<a href="#" class="cTPCheckbox"></a>');c.addClass("cTPHidden").wrap('<span class="cTPCheckboxWrapper"></span>').parent().prepend(d),this.checked&&d.addClass("cTPChecked");var e=b(c);a("label[for="+c.attr("id")+"]").css("cursor","pointer"),a("label[for="+c.attr("id")+"]").on("click",function(){return c.click(),!1}),d.on("click",function(){return c.click(),!1}),c.on("click",function(){if(c.attr("disabled"))return!1;!this.checked&&d.addClass("cTPChecked")||d.removeClass("cTPChecked")})})},a.fn.cTPRadio=function(){return this.each(function(){if(a(this).hasClass("cTPHidden"))return;var c=a(this);c.data("val",this.checked);var d=a('<a href="#" class="cTPRadio" rel="'+this.name+'"></a>');c.addClass("cTPHidden").wrap('<span class="cTPRadioWrapper"></span>').parent().prepend(d),this.checked&&d.addClass("cTPCheckedR");var e=b(c);a("label[for="+c.attr("id")+"]").css("cursor","pointer"),a("label[for="+c.attr("id")+"]").on("click",function(){return c.click(),!1}),d.on("click",function(){return c.click(),!1}),c.on("click",function(){if(c.attr("disabled"))return!1;!this.checked&&d.addClass("cTPCheckedR"),a('input[name="'+c.attr("name")+'"]',this.form).not(c).each(function(){a(this).attr("type")=="radio"&&a(this).prev().removeClass("cTPCheckedR")})})})},a.fn.cTPSelect=function(){var d=0;return this.each(function(e){var f=a(this);if(f.hasClass("cTPHidden"))return;if(f.attr("multiple"))return;var g=b(f),h=f.addClass("cTPHidden").wrap('<div class="cTPSelectWrapper select'+d++ +'"></div>').parent().css({zIndex:100-e});h.prepend('<div><span></span><a href="#" class="cTPSelectOpen">&#9660;</a></div><ul></ul>');var i=a("ul",h).css("width",f.width()).hide();a("option",this).each(function(b){var c=a('<li><a href="#" index="'+b+'">'+a(this).html()+"</a></li>");i.append(c)}),i.find("a").on("click",function(){return a("a.selected",h).removeClass("selected"),a(this).addClass("selected"),f[0].selectedIndex!=a(this).attr("index")&&(f[0].selectedIndex=a(this).attr("index"),a(f[0]).trigger("change")),f[0].selectedIndex=a(this).attr("index"),a("span:eq(0)",h).html(a(this).html()),i.hide(),!1}),f.data("index",this.selectedIndex),a("a:eq("+this.selectedIndex+")",i).click(),a("span:first",h).on("click",function(){a("a.cTPSelectOpen",h).click()}),g&&g.on("click",function(){a("a.cTPSelectOpen",h).click()}),this.oLabel=g;var j=a("a.cTPSelectOpen",h).on("click",function(){return i.css("display")=="none"&&c(),f.attr("disabled")?!1:(i.slideToggle("fast",function(){var b=a("a.selected",i).offset().top-i.offset().top;i.animate({scrollTop:b})}),!1)}),k=f.outerWidth()+20,l=a("span:first",h),m=k>l.innerWidth()?k+j.outerWidth():h.width();h.css("width",m),i.css("width",m),l.css({width:k}),i.css({display:"block",visibility:"hidden"});var n=a("li",i).length*a("li:first",i).height();n<i.height()&&i.css({height:n,overflow:"hidden"}),i.css({display:"none",visibility:"visible"})})},a.fn.cTP=function(){a(".transpie input:checkbox, input:checkbox.transpie").cTPCheckBox(),a(".transpie input:radio, input:radio.transpie").cTPRadio(),a(".transpie select, select.transpie").cTPSelect().length>0&&e(),a("form",this).on("reset",function(){f(this)})}})(jQuery),$(function(){$(".transpie").cTP()})